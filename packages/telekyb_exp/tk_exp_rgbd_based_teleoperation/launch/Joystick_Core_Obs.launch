<launch>
  	<!-- declare argument to be passed in -->
  	<arg name="ID" /> 

	<node name="TeleKybCore_$(arg ID)" pkg="telekyb_core" type="telekyb_core">
		<param name="TeleKybCore/tRobotID" value="$(arg ID)" />
		<param name="SSXStateEstimator/tSSXSeTopicName" value="/TeleKyb/SwarmSimX/Mikrokopter$(arg ID)/InternalState" />
		<param name="SSXStateEstimator/tSSXPositionOffset" value="[0.0,0.0,1.3]" />
		<param name="StandardTrajectoryTracker/tCommandsTopic" value="/TeleKyb/SwarmSimX/Mikrokopter$(arg ID)/commands" />
		<param name="TrajectoryController/tInitialMass" value="0.749" />
		<param name="StateEstimatorController/tPublishRosTransform" value="false"/>
		<param name="PositionControl/tDerGainVelMode" value="7.5" />
		<param name="TrajectoryProcessorController/tTrajectoryModules" value="[]"/>
		<param name="tVelocityInputEnabled" value="true"/>
		<param name="PMObsAvoid/tObsPointsTopicName" value="/TeleKyb/Obstacle_$(arg ID)/ObstaclePoints"/>
		<param name="VMObsAvoid/tObsPointsTopicName" value="/TeleKyb/Obstacle_$(arg ID)/ObstaclePoints"/>
		<param name="TrajectoryProcessorController/tTrajectoryModules" 
		     	     value='
		     ["tk_trajprocessor/PMPositionError",
		     "tk_trajprocessor/PMObsAvoid", 
		     "tk_trajprocessor/VMSaturation",
		     "tk_trajprocessor/XMModeCheck", 
		     "tk_trajprocessor/VMObsAvoid" ]
		     '/>
		<param name="tJoystickUsePositionMode" value="true"/>
	</node>

	<!-- Obstacle Provider -->
	<node name="Obstacle_$(arg ID)" pkg="tk_obstacle" type="obstacle_provider">
		<param name="ObstacleProviderController/tObstacleProviders" value='[ "tk_obstacle/SurroundingBox" ]'/>
		<param name="ObstacleProviderController/tTKStateTopicName" value="/TeleKyb/TeleKybCore_$(arg ID)/Sensor/TKState" />
		<!-- TrackingHall -->
		<param name="SurroundingBox/tMinSurrObsBox" value='[-5.5, -5.5, -4.0]'/>
		<param name="SurroundingBox/tMaxSurrObsBox" value='[5.5, 5.5, 0.0]'/>
		<!-- param name="ConstantPoints/tConstantObstaclePoints" value='[ [0.2,0.2,-0.5], [-1.0, -1.0, 0.4] ]'/ -->
<!--  		<param name="Common/tPrintOptions" value="true"/> -->
	</node>
</launch>
